<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" class="loading" lang="en" data-textdirection="ltr">

<head>
  <!-- Thymeleaf template inclusion -->
  <link th:include="fixedTemplate/defaultCSS.html" rel="stylesheet"/>
</head>

<body class="vertical-layout vertical-menu content-detached-left-sidebar fixed-navbar"
      data-open="click"
      data-menu="vertical-menu" data-color="bg-gradient-x-purple-blue"
      data-col="content-detached-left-sidebar">

<!-- BEGIN: Header-->
<div th:include="fixedTemplate/fixed-top.html"></div>
<!-- END: Header-->

<!-- BEGIN: Main Menu-->
<div th:include="fixedTemplate/side-navigation.html"></div>
<!-- END: Main Menu-->

<!-- BEGIN: Content-->
<div class="app-content content">
  <div class="content-wrapper">
    <div class="content-wrapper-before"></div>
    <div class="content-header row">
      <div class="content-header-left col-md-4 col-12 mb-2">
        <h3 class="content-header-title">마이페이지</h3>
      </div>
      <div class="content-header-right col-md-8 col-12">
        <div class="breadcrumbs-top float-md-right">
          <div class="breadcrumb-wrapper mr-1">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="/vertical-menu-template/index.html">Home</a>
              </li>
              <li class="breadcrumb-item"><a href="#">Apps</a>
              </li>
              <li class="breadcrumb-item active">Contact List
              </li>
            </ol>
          </div>
        </div>
      </div>
    </div>
    <div class="content-detached">
      <div class="content-body">
        <section class="row">
          <div class="col-12">
            <div class="card" style="height: 640.797px;">
              <div class="card-header">
                <h4 class="card-title" id="basic-layout-colored-form-control">Form with Bordered
                  Controls</h4>
                <a class="heading-elements-toggle">
                  <i class="la la-ellipsis-v font-medium-3"></i>
                </a>
                <div class="heading-elements">
                  <ul class="list-inline mb-0">
                    <li>
                      <a data-action="collapse">
                        <i class="ft-minus"></i>
                      </a>
                    </li>
                    <li>
                      <a data-action="reload">
                        <i class="ft-rotate-cw"></i>
                      </a>
                    </li>
                    <li>
                      <a data-action="expand">
                        <i class="ft-maximize"></i>
                      </a>
                    </li>
                    <li>
                      <a data-action="close">
                        <i class="ft-x"></i>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="card-content collapse show">
                <div class="card-body">

                  <form id="editForm" class="form" action="mypage/user/update" method="post">
                    <div class="form-body">
                      <h4 class="form-section">
                        <i class="ft-briefcase"></i> 유저 정보</h4>

                      <div class="form-group">
                        <label for="name">Nickname</label>
                        <p class="form-control border-primary" id="name"
                           th:text="${userDetail != null ? userDetail.name : 'N/A'}"></p>
                      </div>

                      <div class="form-group">
                        <label for="phone">전화번호</label>
                        <p class="form-control border-primary" id="phone"
                           th:text="${userDetail != null ? userDetail.phone : 'N/A'}"></p>
                      </div>

                      <div class="form-group">
                        <label for="email">Email</label>
                        <p class="form-control border-primary" id="email"
                           th:text="${userDetail != null ? userDetail.email : 'N/A'}"></p>
                      </div>

                      <div class="form-group">
                        <label for="role">Role</label>
                        <p class="form-control border-primary" id="role"
                           th:text="${userDetail != null ? userDetail.role : 'N/A'}"></p>
                      </div>
                      <button type="button" class="btn btn-primary" onclick="showEdit()">Edit
                      </button>

                    </div>
                    <div class="form-actions right">
                      <button type="button" class="btn btn-danger mr-1">
                        <i class="ft-x"></i> Cancel
                      </button>
                      <button id="saveBtn" type="button" class="btn btn-primary"
                              onclick="saveData()">
                        <i class="la la-check-square-o"></i> Save
                      </button>
                    </div>
                  </form>
                  <form id="deleteForm" action="mypage/user/delete" method="post">
                    <input type="hidden" name="_method" value="DELETE">
                    <input type="hidden" id="userId" name="id">
                    <button type="submit" class="btn btn-danger mr-1">delete</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>

  </div>
</div>
<!-- END: Content-->


<!-- BEGIN: Footer-->
<a class="btn btn-try-builder btn-bg-gradient-x-purple-red btn-glow white"
   href="https://www.themeselection.com/layout-builder/horizontal" target="_blank">Try Layout
  Builder</a>
<footer class="footer footer-static footer-light navbar-border navbar-shadow">
  <div class="clearfix blue-grey lighten-2 text-sm-center mb-0 px-2"><span
      class="float-md-left d-block d-md-inline-block">2019 &copy; Copyright <a
      class="text-bold-800 grey darken-2" href="https://themeselection.com" target="_blank">ThemeSelection</a></span>
    <ul class="list-inline float-md-right d-block d-md-inline-blockd-none d-lg-block mb-0">
      <li class="list-inline-item"><a class="my-1" href="https://themeselection.com/"
                                      target="_blank"> More
        themes</a></li>
      <li class="list-inline-item"><a class="my-1" href="https://themeselection.com/support"
                                      target="_blank"> Support</a></li>
    </ul>
  </div>
</footer>
<!-- END: Footer-->


<!-- BEGIN: Vendor JS-->
<script src="/vertical-menu-template/app-assets/vendors/js/vendors.min.js"
        type="text/javascript"></script>
<!-- BEGIN Vendor JS-->

<!-- BEGIN: Page Vendor JS-->
<script src="/vertical-menu-template/app-assets/vendors/js/tables/jquery.dataTables.min.js"
        type="text/javascript"></script>
<script
    src="/vertical-menu-template/app-assets/vendors/js/tables/datatable/dataTables.bootstrap4.min.js"
    type="text/javascript"></script>
<script
    src="/vertical-menu-template/app-assets/vendors/js/tables/datatable/dataTables.responsive.min.js"
    type="text/javascript"></script>
<script
    src="/vertical-menu-template/app-assets/vendors/js/tables/datatable/dataTables.rowReorder.min.js"
    type="text/javascript"></script>
<script src="/vertical-menu-template/app-assets/vendors/js/forms/icheck/icheck.min.js"
        type="text/javascript"></script>
<!-- END: Page Vendor JS-->

<!-- BEGIN: Theme JS-->
<script src="/vertical-menu-template/app-assets/js/core/app-menu.js"
        type="text/javascript"></script>
<script src="/vertical-menu-template/app-assets/js/core/app.js" type="text/javascript"></script>
<!-- END: Theme JS-->

<!-- BEGIN: Page JS-->
<script src="/vertical-menu-template/app-assets/js/scripts/pages/users-contacts.js"
        type="text/javascript"></script>
<!-- END: Page JS-->

<div th:include="fixedTemplate/defaultJS.html"></div>

</body>
<!-- END: Body-->

</html>

<script>
  function showEdit() {
    let elements = document.getElementsByClassName('form-control border-primary');
    console.log("num1")
    for (let i = 0; i < elements.length; i++) {
      let element = elements[i];

      if (element.id === 'role') {
        continue;
      }

      let inputType = 'text';

      console.log("num2")
      let value = element.textContent;
      let inputField = document.createElement('input');
      inputField.setAttribute('type', inputType);
      inputField.setAttribute('class', element.getAttribute('class'));
      inputField.setAttribute('id', element.getAttribute('id'));
      inputField.setAttribute('name', element.getAttribute('id'))
      inputField.value = value;

      console.log("num3")
      element.parentNode.replaceChild(inputField, element);
    }
    document.getElementById("saveBtn").style.display = 'inline';
  }

  function saveData() {
    let form = document.getElementById('editForm');
    form.submit();
  }
</script>
